<h2>Rectangle Creator</h2>

<form id="pluginForm">
  <fieldset>
    <legend>Color information</legend>
    <p>
      <label>
        Color
      </label>
      <input type="color" name="colorCode" value="#F65446" />
    </p>

    <p>Count: <input name="count" type="number" value="5" min="1" max="10"></p>
  </fieldset>
</form>

<button id="create">Create</button>
<button id="cancel">Cancel</button>

<script>
  document.getElementById('create').onclick = () => {
    let pluginForm = document.querySelector("#pluginForm");
    let pluginFormData = new FormData(pluginForm);

    let pluginFormObj = {};
    for (let [key, val] of pluginFormData) {
      pluginFormObj[key] = val;
    }

    parent.postMessage({ pluginMessage: { type: 'create-rectangles', pluginFormObj } }, '*')
  }

  document.getElementById('cancel').onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
  }
</script>
